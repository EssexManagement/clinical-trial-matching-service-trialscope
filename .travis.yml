---
language: node_js

env:
  global:
    - TRIALSCOPE_TOKEN=fake_token

node_js:
  - "12"

cache: npm

script:
  - npm install 
  - npm install codecov -g
  - npm run lint
  - npm test
  - npm run-script coverage

before_install: 
  - mkdir src/AllPublicXML
  - mkdir src/AllPublicXML/NCT0358xxxx
  - mv spec/data/NCT03587740.xml src/AllPublicXML/NCT0358xxxx 
  - cd spec/data
  - curl https://storage.googleapis.com/ig-build/org.hl7.fhir.validator.jar  --output org.hl7.fhir.validator.jar

after_success:
  - codecov